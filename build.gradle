// ========================
// ðŸ”¹ ConfiguraÃ§Ã£o de Plugins
// ========================
plugins {
    id 'java'                                           // Suporte a Java
    id 'org.springframework.boot' version '3.5.6'      // Plugin Spring Boot para facilitar build e execuÃ§Ã£o
    id 'io.spring.dependency-management' version '1.1.7' // Gerenciamento automÃ¡tico de dependÃªncias do Spring
}

// ========================
// ðŸ”¹ InformaÃ§Ãµes do Projeto
// ========================
group = 'com.EngCode'        // Pacote base do projeto
version = '0.0.1-SNAPSHOT'   // VersÃ£o do projeto
description = 'Demo project for Spring Boot'

// ========================
// ðŸ”¹ ConfiguraÃ§Ã£o de Java
// ========================
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17) // Usando Java 17
    }
}

// ========================
// ðŸ”¹ ConfiguraÃ§Ãµes de compilaÃ§Ã£o
// ========================
configurations {
    compileOnly {
        extendsFrom annotationProcessor // Annotation processors tambÃ©m sÃ£o considerados durante a compilaÃ§Ã£o
    }
}

// ========================
// ðŸ”¹ RepositÃ³rios para dependÃªncias
// ========================
repositories {
    mavenCentral() // Busca as dependÃªncias no Maven Central
}

// ========================
// ðŸ”¹ VariÃ¡veis extras
// ========================
ext {
    set('springCloudVersion', "2025.0.0") // VersÃ£o do Spring Cloud utilizada
}

// ========================
// ðŸ”¹ DependÃªncias do projeto
// ========================
dependencies {
    // Spring Boot
    implementation 'org.springframework.boot:spring-boot-starter-data-mongodb' // MongoDB
    implementation 'org.springframework.boot:spring-boot-starter-security'     // SeguranÃ§a (JWT)
    implementation 'org.springframework.boot:spring-boot-starter-web'          // Web (REST API)
    implementation 'org.springframework.cloud:spring-cloud-starter-openfeign'   // FeignClient para comunicaÃ§Ã£o entre microserviÃ§os

    // JWT
    implementation 'io.jsonwebtoken:jjwt-api:0.12.6'          // API JWT
    runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.12.6'            // ImplementaÃ§Ã£o JWT
    runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.12.6'         // IntegraÃ§Ã£o JWT com Jackson

    // MapStruct (mapeamento automÃ¡tico DTO â†” Entity)
    implementation 'org.mapstruct:mapstruct:1.5.3.Final'
    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.3.Final'
    annotationProcessor 'org.projectlombok:lombok-mapstruct-binding:0.2.0' // Compatibilidade Lombok + MapStruct

    // Lombok
    compileOnly 'org.projectlombok:lombok'        // Reduz boilerplate (getters, setters, etc.)
    annotationProcessor 'org.projectlombok:lombok'

    // Testes
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.springframework.security:spring-security-test'
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
}

// ========================
// ðŸ”¹ Gerenciamento de dependÃªncias do Spring Cloud
// ========================
dependencyManagement {
    imports {
        mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
    }
}

// ========================
// ðŸ”¹ ConfiguraÃ§Ã£o dos testes
// ========================
tasks.named('test') {
    useJUnitPlatform() // Configura JUnit 5
}
